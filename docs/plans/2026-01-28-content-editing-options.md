# 內容可編輯方案與資源估算（草案）

## 目標與前提
- 需求：非技術人員可編輯「所有文字」（必要），可選更換圖片（非必要）。
- 更新：編輯後前端立即可見（即時或近即時）。
- 流量：每日 < 1K PV。
- 現況：VitePress 靜態站點；允許常駐後端。

## 方案 A（推薦）：PocketBase 單體後端 + 前端即時訂閱
**做法**：用 PocketBase 內建 Admin UI 管理內容與圖片；前端改成執行期載入內容，透過 PB realtime 訂閱資料變更，立即更新畫面。

**資源估算（生產）**
- 1 vCPU / 1–2 GB RAM / 20–50 GB 磁碟
- 圖片存放：可用 PB 檔案欄位；圖片多時建議外接物件儲存（如 S3/R2）

**優點**
- 上手快、維運低、即時更新內建
- 權限與欄位型別可控（文字/圖片/關聯）

**限制**
- 單機為主；需要更高可用性時需升級架構

## 方案 B：第三方 SaaS 內容源（Google Sheets / Airtable / Notion）
**做法**：內容放在 SaaS；前端執行期直接讀 API 或轉換後的 JSON。更新接近即時（取決於 API 快取與前端輪詢）。

**資源估算（生產）**
- 自建後端：0（只需靜態站點）
- 主要成本在 SaaS 訂閱與 API 限額

**優點**
- 伺服器資源占用最低
- 非技術人員熟悉表格/文件即可編輯

**限制**
- 即時性需靠短輪詢或降低快取 TTL
- 欄位結構需在前端做好資料驗證

## 方案 C：Serverless 內容層（Cloudflare Workers + KV/D1）
**做法**：用簡單管理頁寫入 KV/D1，前端讀取 API。即時更新可透過短輪詢或 SSE。

**資源估算（生產）**
- 無常駐 VM，只有按量計費（極低）
- 儲存小、計算成本低

**優點**
- 資源占用極小
- 可保留自訂管理體驗

**限制**
- 需要自建管理頁與基本認證
- 即時更新多半靠輪詢或 SSE

## 方案 D（不推薦）：Git-based CMS（Decap/Netlify CMS）
**做法**：內容提交到 Git，觸發重新建置與部署。

**優點**
- 資源極低
- 審核/版本控管方便

**限制**
- 不符合「立即更新」要求（需重建）

## 即時更新的共通前提
- 前端改為「執行期載入」內容（不要在 build 時寫死）
- 使用 WebSocket/SSE 或短輪詢以實現近即時更新
- 設定合理快取策略（短 TTL 或條件式請求）

## 建議結論（基於 <1K PV）
- 若接受小型常駐後端：**PocketBase** 最省事且體驗最佳
- 若希望資源占用最低：**SaaS 內容源** 或 **Serverless + KV/D1**

